:root {
  --light-100: rgba(255,255,255, 1);
  --light-90: rgba(255,255,255, 0.9);
  --light-80: rgba(255,255,255, 0.8);
  --light-70: rgba(255,255,255, 0.7);
  --light-60: rgba(255,255,255, 0.6);
  --light-50: rgba(255,255,255, 0.5);
  --light-40: rgba(255,255,255, 0.4);
  --light-30: rgba(255,255,255, 0.3);
  --light-20: rgba(255,255,255, 0.2);
  --light-10: rgba(255,255,255, 0.1);

  --shade-100: rgba(0,0,0, 1);
  --shade-90: rgba(0,0,0, 0.9);
  --shade-80: rgba(0,0,0, 0.8);
  --shade-70: rgba(0,0,0, 0.7);
  --shade-60: rgba(0,0,0, 0.6);
  --shade-50: rgba(0,0,0, 0.5);
  --shade-40: rgba(0,0,0, 0.4);
  --shade-30: rgba(0,0,0, 0.3);
  --shade-20: rgba(0,0,0, 0.2);
  --shade-10: rgba(0,0,0, 0.1);
  --shade-5: rgba(0,0,0, 0.05);

  --grayscale-100: #fff;
  --grayscale-95: #f4f4f4;
  --grayscale-94: #f0f0f0;
  --grayscale-90: #eaeaea;
  --grayscale-85: #dadad8;
  --grayscale-80: #ccc;
  --grayscale-65: #aaa;
  --grayscale-60: #999;
  --grayscale-40: #606060;
  --grayscale-20: #333;
  --grayscale-0: #000;

  --accent-1-50: #05c;
  --accent-1-70: #07e;
  --accent-2-50: #06c;
  --accent-2-70: #06f;

  --background-color: var(--grayscale-85);
  --text-color: var(--grayscale-20);

  --monospace: 'SourceCodeProRegular', 'Consolas', monospace;
  --monospace-bold: 'SourceCodeProSemibold', 'Consolas', monospace;
  --sans-serif: 'Helvetica Neue', Helvetica, Arial, sans-serif;
  --sans-serif-alt: Verdana, 'Century Gothic', 'Geneva', sans-serif;
  --serif: Georgia, serif;

  --xx-sm-font-size: 8px;
  --x-sm-font-size: 10px;
  --x-sm-line-height: 14px;
  --sm-font-size: 11px;
  --sm-line-height: 16px;
  --md-font-size: 12px;
  --md-line-height: 18px;
  --lg-font-size: 16px;
  --lg-line-height: 24px;
  --x-lg-font-size: 24px;
  --xx-lg-font-size: 30px;

  --gutter: 1rem;
  --index-width: 240px;
  --logo-image-height: 48px;
  --logo-height: 64px;
  --post-width: 600px;

  --collapsed-index-height: calc(var(--logo-image-height) + 2px);
  --full-layout-width: calc(var(--index-width) + var(--gutter) + var(--post-width) + var(--gutter));
}
@media print {
  :root {
    --light-100: transparent;
    --light-90: transparent;
    --light-80: transparent;
    --light-70: transparent;
    --light-60: transparent;
    --light-50: transparent;
    --light-40: transparent;
    --light-30: transparent;
    --light-20: transparent;
    --light-10: transparent;

    --shade-100: transparent;
    --shade-90: transparent;
    --shade-80: transparent;
    --shade-70: transparent;
    --shade-60: transparent;
    --shade-50: transparent;
    --shade-40: transparent;
    --shade-30: transparent;
    --shade-20: transparent;
    --shade-10: transparent;
    --shade-5: transparent;
  }
}

@font-face {
  font-family: 'SourceCodeProRegular';
  src: url('/media/theme/SourceCodePro-Regular-webfont.woff') format('woff'),
       url('/media/theme/SourceCodePro-Regular-webfont.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'SourceCodeProSemibold';
  src: url('/media/theme/SourceCodePro-Semibold-webfont.woff') format('woff'),
       url('/media/theme/SourceCodePro-Semibold-webfont.ttf') format('truetype');
  font-weight: normal;
  font-style: normal;
}

@font-face {
  font-family: 'FontAwesomeIcoMoon';
  src: url('/media/theme/FontAwesome-IcoMoon.ttf') format('truetype'),
       url('/media/theme/FontAwesome-IcoMoon.woff') format('woff');
  font-weight: normal;
  font-style: normal;
}

[class^="icon-"], [class*=" icon-"] {
  /* use !important to prevent issues with browser extensions that change fonts */
  font-family: 'FontAwesomeIcoMoon' !important;
  font-style: normal;
  font-variant: normal;
  font-weight: normal;
  line-height: 1;
  speak: none;
  text-transform: none;
}
[class^="icon-"]::before, [class*=" icon-"]::before {
  vertical-align: middle;
}
.icon-arrow-down::before { content: "\f063"; }
.icon-arrow-left::before { content: "\f060"; }
.icon-arrow-right::before { content: "\f061"; }
.icon-code::before { content: "\f121"; }
.icon-codepen::before { content: "\f1cb"; }
.icon-deviantart::before { content: "\f1bd"; }
.icon-envelope::before { content: "\f003"; }
.icon-external-link::before { content: "\f08e"; }
.icon-facebook::before { content: "\f09a"; }
.icon-flickr::before { content: "\f16e"; }
.icon-github::before { content: "\f09b"; }
.icon-google-plus::before { content: "\f0d5"; }
.icon-instagram::before { content: "\f16d"; }
.icon-lastfm::before { content: "\f202"; }
.icon-linkedin::before { content: "\f0e1"; }
.icon-minus::before { content: "\f068"; }
.icon-pause::before { content: "\f04c"; }
.icon-pinterest::before { content: "\f231"; }
.icon-play::before { content: "\f04b"; }
.icon-plus::before { content: "\f067"; }
.icon-print::before { content: "\f02f"; }
.icon-stack-overflow::before { content: "\f16c"; }
.icon-tumblr::before { content: "\f173"; }
.icon-twitter::before { content: "\f099"; }
.icon-vimeo::before { content: "\f27d"; }

/* - */

body {
  cursor: default;
  margin: 0;
  text-align: left;

  --background: var(--background-color) url(/media/theme/bg-space-tile.jpg) 0 0 repeat-x fixed;
  background: var(--background);
  color: var(--text-color);
  font-family: var(--sans-serif);
}

/* - */

* { -webkit-tap-highlight-color: var(--light-10); }

input, select, textarea { color: var(--text-color); }
abbr, strong { color: var(--grayscale-0); }

strong { font-weight: bold; }
em { font-style: italic; }
em, em > * { letter-spacing: normal; word-spacing: normal; }
em strong { font-weight: normal; }

h1, h2, h3 {
  font-weight: bold;
  letter-spacing: -.05em;
  line-height: 1em; /* reset */
  text-transform: lowercase;
  word-spacing: .05em;

  font-family: var(--sans-serif);
  text-shadow: 0 1px 0 var(--shade-20);
}
h1 { font-size: var(--xx-lg-font-size); }
h2 { font-size: var(--x-lg-font-size); }
h3 { font-size: var(--lg-font-size); }
h4 {
  border-style: solid;
  border-width: 1px;
  font-style: italic;
  font-weight: normal;

  background-color: var(--grayscale-95);
  border-color: transparent var(--grayscale-90) var(--grayscale-85);
  box-shadow: inset 0 -1px 4px var(--shade-10);
  font-family: var(--serif);
  font-size: var(--md-font-size);
  text-shadow: 0 1px 0 var(--shade-20);
}
h3, h4 { margin: 0; }
h3 > sup.count {
  font-size: 100%;
  vertical-align: baseline;
  text-shadow: none;
  top: 0;

  color: var(--grayscale-85);
}
h4 > .meta {
  font-style: normal;
  letter-spacing: 1px;
  line-height: inherit;
  text-transform: uppercase;
  word-spacing: 2px;

  font-family: var(--sans-serif-alt);
  font-size: var(--xx-sm-font-size);
  margin-left: 1em;
}
li > h4 {
  --pull: calc(var(--gutter) / -4);
  margin-left: var(--pull);
  margin-right: var(--pull);
  padding-left: calc(var(--pull) * -1);
}
@media print {
  h4 { border: 0; }
}

a {
  border-bottom: 1px dotted transparent;
  text-decoration: none;
  transition-duration: 0.3s;
  transition-property: color, border-bottom-color;
}
a:link, a:active, a:visited { color: var(--accent-2-50); }
a:hover {
  border-bottom-color: var(--grayscale-65);
  color: var(--accent-2-70);
}

h3 a, h3 a:hover { color: var(--text-color); }
h3 aside a { color: var(--grayscale-65); }
h3 aside a:hover { color: var(--text-color); }

ol, ul {
  list-style: none;
  padding-left: 0;
}

h4 + p,
dl:first-child, ol:first-child, ul:first-child,
p:first-child { margin-top: 0; }

dl:last-child, ol:last-child, ul:last-child,
p:last-child { margin-bottom: 0; }

p, nav, li, dd, dt {
  font-family: var(--monospace);
  font-size: var(--sm-font-size);
  word-spacing: -1px;
}
p strong, li strong, dd strong {
  font-family: var(--monospace-bold);
  font-weight: normal;
}
p, figcaption { line-height: var(--md-line-height); }
li, li > p, dd, dt { line-height: var(--sm-line-height); }
li > [class^="icon-"] {
  opacity: 0.2;
  transition: opacity 0.3s;

  color: var(--grayscale-60);
  font-size: var(--md-font-size);
}
li:hover > [class^="icon-"] { opacity: 1; }

dl.has-icons {
  --dt-width: calc(1em + 1rem);
  display: inline-flex;
  flex-wrap: wrap;
}
dl.has-icons > dt {
  color: var(--grayscale-60);
  flex-basis: var(--dt-width);
}
dl.has-icons > dd {
  margin-left: 0;
  flex-basis: calc(100% - var(--dt-width));
}

button {
  border-radius: 0;
  padding: 0;
  transition-duration: 0.3s;
  transition-property: background-color, border-color, color, opacity;

  background-color: var(--shade-5);
  border: 1px solid var(--light-80);
  box-shadow: inset 0 0 4px var(--shade-20), 0 0 2px var(--light-30);
  color: var(--shade-40);
  font-size: var(--md-font-size);
}
button:disabled { opacity: 0.4; }
button:focus { outline: 1px solid var(--shade-10); }
button:not([disabled]).highlighted,
button:not([disabled]):hover {
  background-color: transparent;
  cursor: pointer;

  border-color: var(--light-100);
  color: var(--shade-60);
}

/* - */

.js-tips-tip {
  --tip-fill-color: var(--grayscale-40);
  --stem-size: calc(var(--tip-em) / 2);
  --stem-size-wide-half: var(--stem-size);
}

.js-tips-content {
  font-family: var(--serif);
  font-size: var(--x-sm-font-size);
  font-style: italic;
  line-height: var(--x-sm-line-height);
  text-transform: lowercase;
}

/* - */

body { overflow: hidden; }
.layout {
  align-items: flex-start;
  display: flex;
  height: 100%;
  overflow-y: auto;
  position: absolute;

  max-width: var(--full-layout-width);
}
.layout::-webkit-scrollbar { display: none; }
.layout > * {
  height: 100%;
  margin-right: calc(var(--gutter) * 0.1875);
  overflow-y: auto;
  padding-right: calc(var(--gutter) * 0.8125);
  scroll-behavior: smooth;
}
.index {
  width: var(--index-width);
}
.post {
  width: var(--post-width);
}
@media (max-width: 871px) and (min-width: 601px) { /* --full-layout-width */
  .index {
    flex-basis: var(--index-width);
    transition-duration: 0.2s;
    transition-property: flex-basis, margin-right, padding-right;
    transition-timing-function: linear;
  }
  .index > footer,
  .index > nav {
    box-sizing: border-box;
    width: var(--index-width);
  }
  .index.js-drawer-closed {
    flex-basis: 0;
    margin-right: calc((100vw - var(--post-width)) / 2);
    padding-right: 0;
  }
}
@media (max-width: 600px) { /* --post-width */
  body {
    background: none;
    height: 100%;
    position: fixed;
    top: 0;
    width: 100%;
  }
  .layout {
    background: var(--background);
    height: 100%;
    width: 100%;
  }
  .layout > * {
    height: auto;
    position: absolute;
    top: 0;

    padding-left: var(--gutter);
    width: calc(100vw - var(--gutter) * 2);
  }
  .index {
    z-index: 2;
    --expand-delay: 0.1s;
    --expand-duration: 0.4s;
  }
  .index.js-expanded-visible + .post,
  .index > footer,
  .index > nav {
    display: none;
  }
  .index > footer,
  .index > nav {
    opacity: 0;
    transition: opacity var(--expand-duration);
  }
  .index.js-expanded-visible > footer,
  .index:not(.js-expanded-visible) > nav {
    transition-delay: var(--expand-delay);
  }
  .post,
  .index.js-expanded {
    bottom: 0;
  }
  .index.js-expanded > footer,
  .index.js-expanded > nav {
    display: block;
  }
  .index.js-expanded-visible > footer,
  .index.js-expanded-visible > nav {
    opacity: 1;
  }
  .post {
    padding-top: var(--collapsed-index-height);
  }
}
@media print {
  .layout { position: static; }
  .index { display: none; }
}

/* - */

.index > * {
  margin-bottom: var(--gutter);
}
.index > header {
  background: var(--grayscale-100);
  border: 1px solid var(--grayscale-100);
  box-shadow: inset 0 0 1.5em var(--shade-10), 0 0 3px var(--shade-20);
}
.index .logo {
  margin: 0;
  padding-left: 3px;
  padding-top: var(--gutter);
  position: relative;
}
.logo > a {
  background-repeat: no-repeat;
  border-bottom: 0;
  bottom: 0;
  display: block;
  overflow: hidden;
  position: absolute;
  text-indent: -999em;
  transition: opacity 0.5s;
}
.logo > div.highlighted,
.logo > a {
  background-image: url(/media/theme/logo-sprite.jpg);
  height: var(--logo-image-height);
  width: 225px;
}
.logo > div.highlighted {
  background-position: 0 calc(1px - var(--logo-image-height));
}
.logo > a:hover { opacity: 0; }
@media (max-width: 600px) { /* --post-width */
  .index > header {
    box-shadow: 0 0 3px var(--shade-20);
    transition: background var(--expand-duration);
  }
  .index:not(.js-expanded-visible) > header { background: transparent; border-color: transparent; box-shadow: none; }
  .index .logo {
    padding-left: 0;
    padding-top: 0;

    height: var(--logo-image-height);
  }
  .logo > a:hover { opacity: initial; }
  .logo > div.highlighted { display: none; }
  .index.js-expanded-visible .logo > a {
    left: 1px;
    margin-left: auto;
    margin-right: auto;
    position: relative;
  }
  .index:not(.js-expanded-visible) .logo > a {
    background-image: none;
    left: calc(50% + 1.5px);
    line-height: 2;
    transform: translateX(-50%);

    --size: 24px;
    height: var(--size);
    top: calc((var(--collapsed-index-height) - var(--size)) / 2 + 1px);
    width: var(--size);
  }
  .index:not(.js-expanded-visible) .logo > a::after,
  .index:not(.js-expanded-visible) .logo > a::before {
    content: '';
    display: block;
    left: 0;
    position: absolute;

    background: var(--accent-1-50);
    height: calc(var(--size) / 4);
    top: calc(var(--size) / 3);
    width: calc(var(--size) - 1px);
  }
  .index:not(.js-expanded-visible) .logo > a::after { transform: rotate(-45deg); }
  .index:not(.js-expanded-visible) .logo > a::before { transform: rotate(45deg); }
  .index:not(.js-expanded-visible) + .post::before {
    content: '';
    display: block;
    left: 0;
    opacity: 0.7;
    position: fixed;
    top: 0;
    width: 100%;
    z-index: 1;

    background: var(--background);
    height: calc(var(--collapsed-index-height) - 1px);
  }
}
.index > nav {
  border-style: solid;
  border-width: 1px 1px 1px 0;

  background: var(--grayscale-95);
  border-color: var(--grayscale-95);
  box-shadow: inset -1em 0 2em 1px var(--light-20), 0 0 3px var(--shade-20);
}
.index ul.section {
  margin-bottom: 1.2rem;
  margin-top: 1.2rem;
}
.section > li {
  display: block;

  border-bottom: 1px solid var(--grayscale-90);
}
.section > li.header {
  align-items: center;
  display: flex;
  padding-bottom: 0.5rem;

  padding-left: var(--gutter);
  padding-right: var(--gutter);
}
.section > li.header > h3 {
  flex-grow: 1;
}
.section h3 > span.name {
  border-bottom: 1px dotted var(--grayscale-65);
}
.section > li > a {
  border-left: 0.6875rem solid transparent;
  border-bottom: 0;
  display: block;
  transition-duration: 0.2s;
  transition-property: background-color, border-color;

  padding: 6px 11px 2px 0.3125rem;
  text-shadow: -1px -1px var(--light-50), 1px 1px var(--light-50),
    0 -1px var(--light-50), 0 1px var(--light-50);
}
.section > li > a:hover {
  background-color: var(--grayscale-100);
}
.section > li.active > a {
  border-left-color: var(--accent-1-50);
}
.section > li.active > a:hover {
  border-left-color: var(--accent-1-70);
}
.section button.accordion > span {
  display: block;
  padding: 0.4rem 0.5rem;
}
.section.js-ac-folded button.accordion > .icon-minus,
.section:not(.js-ac-folded) button.accordion > .icon-plus { display: none; }
.index > footer {
  background: var(--grayscale-90);
  border: 1px solid var(--grayscale-90);
  box-shadow: inset -1em 0 2em 1px var(--light-20), 0 0 3px var(--shade-20);

  padding: 1rem;
  padding-right: 0.5rem;
}
.index > footer p {
  margin: 0;
}
.index .colophon {
  font-style: italic;

  color: var(--grayscale-60);
  font-family: var(--serif);
  font-size: var(--x-sm-font-size);
  line-height: var(--x-sm-line-height);
}
.index .copyright-symbol {
  vertical-align: middle;

  font-family: var(--sans-serif);
  font-size: var(--md-font-size);
}

/* - */

article figure > img,
article figcaption,
article nav.bar,
article > section,
article > p {
  background: var(--grayscale-100);
  box-shadow: inset 0 0 1.5em var(--shade-10), 0 0 3px var(--shade-20);
  margin-bottom: var(--gutter);
}
article figcaption,
article nav.bar,
article > section,
article > p {
  box-sizing: border-box;

  border: 1px solid var(--grayscale-100);
  padding: var(--gutter);
}
article figcaption,
article > p { padding-bottom: calc(var(--gutter) * 0.8125); /* line-height compensation */ }
article > p.embed { border: 0; line-height: 0; padding: 0; }
@media (max-width: 600px) { /* --post-width */
  article > p.embed > iframe {
    --width: calc(100vw - var(--gutter) * 2);
    width: var(--width);
  }
  article > p.embed > iframe[data-aspect-ratio="4:3"] { height: calc(var(--width) / (4 / 3)); }
}
article figure > img[src$="_clear.png"] { background: none; box-shadow: none; }
article nav.bar > button {
  margin-bottom: calc(var(--gutter) * -0.1875);
  margin-top: calc(var(--gutter) * -0.1875);
}
article > section > header {
  margin-bottom: var(--gutter);
  margin-top: calc(var(--gutter) / 2);
}
section .body.columnar h4,
section > .body h4 {
  margin-bottom: calc(var(--gutter) / 4);
  padding-bottom: calc(var(--gutter) / 3);
  padding-top: calc(var(--gutter) / 4);
}
section > .body:not(.columnar) > li:not(:last-child) {
  margin-bottom: calc(var(--gutter) * 0.8125);
}
.body.columnar {
  display: flex;
}
.body.columnar > li {
  flex-basis: 0;
  flex-grow: 1;
  margin: 0;
}
.body.columnar > li:not(:last-child) { margin-right: var(--gutter); }
.body.columnar ul > li { padding: calc(var(--gutter) * 0.1875) 0; }
.body.columnar ul.has-icons > li { align-items: baseline; display: flex; }
.body.columnar ul.has-icons > li > *:first-child { flex-grow: 1; }
.body.columnar ul.has-icons > li > a { border-bottom: 0; }
.body.columnar ul.has-icons > li > [class^="icon-"] { text-align: center; width: 1rem; }
@media (max-width: 600px) { /* --post-width */
  section > .body-wrap {
    overflow-x: auto;

    --scrollbar-pull: calc(var(--gutter) * 0.5);
    margin-bottom: calc(var(--scrollbar-pull) * -1);
  }
  .body-wrap > .body.columnar {
    min-width: calc(var(--column-count) * 50%);
    margin-bottom: var(--scrollbar-pull);
  }
}
section > header.has-button,
nav.bar {
  align-items: center;
  display: flex;
}
section > header.has-button > h3,
nav.bar > .flexible-space { flex-grow: 1; }
nav.bar > .separator { margin: 0 0.2rem; }
article button > span {
  display: block;
  padding: 0.2rem 0.4rem;
}
article figure { margin: var(--gutter) 0; }
article figure > img {
  display: block;
  margin-bottom: var(--gutter);
}
article figcaption > span.caption {
  margin-left: 1em;
  opacity: 0.33;
}
.slideshow > .slides {
  -webkit-overflow-scrolling: touch;
  display: flex;
  overflow-x: scroll;
  scroll-snap-type: mandatory;
}
.slideshow > .slides::-webkit-scrollbar {
  background: transparent;
  width: 0;
}
.slideshow .slide {
  opacity: 0.2;
  scroll-snap-align: center;

  --duration: 0.4s;
  margin-right: var(--gutter);
  transition: opacity var(--duration);
}
.slideshow .slide.current { opacity: 1; }
.slideshow .slide > figure { margin: 0; }
.slide > figure > img {
  -webkit-filter: grayscale(100%);
  transition: webkit-filter;
  margin-bottom: 0;

  transition: -webkit-filter var(--duration);
}
.slide .caption > .compact { display: none; }
.slideshow .slide.full-screen > figure {
  height: 100%;
  left: 0;
  overflow: auto;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 3;

  background: var(--shade-90);
}
.slide.full-screen > figure > figcaption { display: none; }
.slide.full-screen > figure > img {
  background: transparent;
  bottom: 0; left: 0; right: 0; top: 0;
  display: block;
  margin: auto;
  position: absolute;

  border: var(--gutter) solid transparent;
}
@media (max-width: 600px) { /* --post-width */
  article figcaption > span.caption { margin-left: 0.3em; }
  .slide:not(.full-screen) > figure > img {
    margin-left: auto;
    margin-right: auto;

    --figcaption-height: calc(var(--md-line-height) + var(--gutter) * 1.8125);
    max-height: calc(
      100vh - var(--collapsed-index-height) - 1px
      - var(--gutter) * 2 - var(--figcaption-height)
    );
    margin-bottom: var(--gutter);
    max-width: calc(100vw - var(--gutter) * 2);
  }
  .slide .caption > :not(.compact) { display: none; }
  .slide .caption > .compact { display: initial; }
  .slide figcaption {
    font-size: var(--x-sm-font-size);
    text-transform: uppercase;
    white-space: nowrap;
  }
}
.slide.current > figure > img {
  -webkit-filter: none;
  cursor: pointer;
}
.slideshow.single-slide nav.bar { display: none; }
@media print {
  article > p.embed,
  nav.bar { display: none; }
  .slideshow > .slides { display: block; }
  .slideshow .slide {
    opacity: 1;
    page-break-inside: avoid;
  }
  .slide > figure > img { margin-bottom: var(--gutter); }
}

/* - */

h3.haiku {
  line-height: 20px;
}

article > section.intro {
  background-image: url(/media/theme/portrait.png);
  background-position: bottom right;
  background-repeat: no-repeat;

  --image-height: 300px;
  min-height: var(--image-height);
}
article > section.intro > * {
  margin-right: 230px;

  --centering-margin: calc(var(--gutter) * 1.75);
  margin-bottom: var(--centering-margin);
  margin-top: var(--centering-margin);
}
@media (max-width: 600px) { /* --post-width */
  article > section.intro {
    background-position: bottom center;

    padding-bottom: var(--image-height);
  }
  article > section.intro > * {
    margin-right: 0;

    margin-bottom: var(--gutter);
    margin-top: var(--gutter);
  }
}
